<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>repl.it</title>
    <link href="style.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
   
    <canvas width="500" height="500" id="canvas">not supported</canvas>
    <br>
    </br>
    <canvas width="600" height="300" id="canvas2">not supported</canvas>
   
    
    <script src="script.js">
    </script>
    

    <br>
    <label>delay (ms)</label>
    <input type="number" value="0" id="delay">
    <br>
    <button id="reset_button">reset</button>
    <button id="breadth first">Breadth First Search</button>
    <script>

      let breadth_first_button = document.getElementById("breadth first");
      let reset_button = document.getElementById("reset_button");
      breadth_first_button.addEventListener('click', breadth_wrapper);
      reset_button.addEventListener('click', reset);


      const sleep = (milliseconds) => {
        return new Promise(resolve => setTimeout(resolve, milliseconds))
      }

      function getStartId(){
        let start = nodeking.getChildrenByText("start");
        
        return start[0].id;
      }

      function getEndId(){
        let end = nodeking.getChildrenByText("end");
        
        return end[0].id;
      }

      function reset(){
        nodeking.edges.map(edge => edge.color = "black");
      }

      async function breadth_wrapper(){
        reset();
        let delay =  Number(document.getElementById("delay").value);
        console.log(delay);
        console.log("start");
        console.log("start "+getStartId());
        console.log("end "+getEndId());
        let thing = await nodeking.breadthFirstSearch(getStartId(), getEndId(), true, delay);
        console.log("done")
        
      }
      function log_all_values(){
        nodeking.objs.map((node)=>console.log(node.value));
      }
    </script>
    <script>
      let canvas = document.getElementById("canvas");
      let nodeking = new Graph("canvas");
      let nodeking2 = new Graph("canvas2");
      let start = nodeking.node(100, 100, 40, "start");
      let end = nodeking.node(400, 400, 40, "end");
      start.connect(end);
      
    </script>
  </body>
</html>